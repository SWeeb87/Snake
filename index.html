<!DOCTYPE html>
<html>
<head>
    <title>Snake Game</title>
    <style>
        #progressContainer {
            width: 100%;
            background-color: #ddd;
        }
        #progressBar {
            width: 0;
            height: 30px;
            text-align: center;
            line-height: 30px;
            color: white;
            background-color: #4caf50;
        }
    </style>
</head>
<body>
    <h1>Loading Snake Game...</h1>
    <div id="progressContainer">
        <div id="progressBar">0%</div>
    </div>
    <div id="unityContainer" style="width: 800px; height: 600px; margin-top: 20px;"></div>

    <script>
        async function loadAndDecompressFiles() {
            // URL dei file
            const buildZipUrl = "https://github.com/SWeeb87/Snake/releases/download/1.0/Build.zip";
            const templateDataUrl = "https://github.com/SWeeb87/Snake/releases/download/1.0/TemplateData.zip";
            
            // Mostra una barra di progresso
            let progress = 0;
            const progressBar = document.getElementById('progressBar');

            // Simulazione di decompressione e caricamento dei file
            function updateProgressBar(percentage) {
                progress = percentage;
                progressBar.style.width = `${progress}%`;
                progressBar.textContent = `${progress}%`;
            }

            // Scarica i file e decomprimili (simulato)
            updateProgressBar(30);
            await new Promise(resolve => setTimeout(resolve, 1000)); // Simulazione di un download
            updateProgressBar(60);
            await new Promise(resolve => setTimeout(resolve, 1000)); // Simulazione di un download

            // Caricamento e inizializzazione di Unity
            updateProgressBar(100);
            createUnityInstance(document.querySelector("#unityContainer"), {
                dataUrl: "Build/Snake Build.data",
                frameworkUrl: "Build/Snake Build.framework.js",
                codeUrl: "Build/Snake Build.wasm"
            }).then((unityInstance) => {
                console.log("Unity Game Loaded Successfully");
            }).catch((error) => {
                console.error("Failed to load Unity game:", error);
            });
        }

        loadAndDecompressFiles();
    </script>
</body>
</html>
